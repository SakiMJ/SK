// This file is automatically generated by Next.js. Do not modify this file.

import { renderToHTML } from 'next/dist/server/render';
import { getPagePath } from 'next/dist/next-server/server/require';
import { prepareServerProps } from 'next/dist/next-server/server/utils';
import { getServerSideProps } from '../../pages/index';

export async function renderReqToHTML(req, res, true) {
  const { finished } = await renderToHTML(req, res, '/', {}, true);
  if (finished) {
    return { finished };
  }

  const props = await prepareServerProps({
    Components: [getServerSideProps],
    page: '/',
    App: undefined,
    Document: undefined,
    DocumentMiddleware: undefined,
    ctx: { req, res },
  });

  return renderToHTML(req, res, '/', props, true);
}

export async function render(req, res) {
  try {
    const html = await renderReqToHTML(req, res, true);
    return html;
  } catch (err) {
    console.error(err);
    res.statusCode = 500;
    res.end('Internal Server Error');
  }
}